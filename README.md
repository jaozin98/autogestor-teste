# AutoGestor

## üìã Descri√ß√£o

O **AutoGestor** √© um sistema completo de gerenciamento empresarial desenvolvido em Laravel, focado no controle de produtos, categorias, marcas e usu√°rios. O sistema oferece uma interface moderna e intuitiva para gerenciar invent√°rios, com sistema de permiss√µes robusto e funcionalidades avan√ßadas de controle de acesso.

### üéØ Principais Funcionalidades

-   **Gest√£o de Produtos**: Cadastro, edi√ß√£o, exclus√£o e controle de estoque
-   **Gest√£o de Categorias**: Organiza√ß√£o hier√°rquica de produtos
-   **Gest√£o de Marcas**: Controle de fabricantes e fornecedores
-   **Sistema de Usu√°rios**: Cadastro e gerenciamento de usu√°rios
-   **Sistema de Permiss√µes**: Controle granular de acesso baseado em roles
-   **Dashboard Interativo**: Vis√£o geral do sistema com estat√≠sticas
-   **Interface Responsiva**: Design moderno e adapt√°vel a diferentes dispositivos
-   **Sistema de Logs**: Rastreamento completo de a√ß√µes dos usu√°rios

## üõ†Ô∏è Tecnologias Utilizadas

### Backend

-   **PHP 8.2+** - Linguagem de programa√ß√£o principal
-   **Laravel 12.0** - Framework PHP para desenvolvimento web
-   **MySQL** - Banco de dados
-   **Spatie Laravel Permission** - Sistema de permiss√µes e roles
-   **Laravel Breeze** - Sistema de autentica√ß√£o
-   **Laravel UI** - Interface de usu√°rio

### Frontend

-   **Tailwind CSS 3.1** - Framework CSS utilit√°rio
-   **Alpine.js 3.4** - Framework JavaScript minimalista
-   **Bootstrap 5.2** - Componentes de interface
-   **Font Awesome 6.4** - √çcones
-   **Vite 6.2** - Build tool e bundler
-   **Sass** - Pr√©-processador CSS

### Ferramentas de Desenvolvimento

-   **Laravel Pint** - Code style fixer
-   **PHPUnit** - Framework de testes
-   **Laravel Pail** - Log viewer
-   **Faker** - Gera√ß√£o de dados fict√≠cios para testes

## üìã Pr√©-requisitos

Antes de come√ßar, certifique-se de ter instalado:

-   **PHP 8.2 ou superior**
-   **Composer** (gerenciador de depend√™ncias PHP)
-   **Node.js 18+** e **npm** (para assets frontend)
-   **Git** (controle de vers√£o)

### Extens√µes PHP Necess√°rias

-   BCMath PHP Extension
-   Ctype PHP Extension
-   cURL PHP Extension
-   DOM PHP Extension
-   Fileinfo PHP Extension
-   JSON PHP Extension
-   Mbstring PHP Extension
-   OpenSSL PHP Extension
-   PCRE PHP Extension
-   PDO PHP Extension
-   Tokenizer PHP Extension
-   XML PHP Extension

## üöÄ Instala√ß√£o

### üê≥ Usando Docker (Recomendado)

A forma mais f√°cil de executar o AutoGestor √© usando Docker. Isso garante que todos os ambientes sejam id√™nticos.

#### Pr√©-requisitos Docker

-   **Docker** - [Instalar Docker](https://docs.docker.com/get-docker/)
-   **Docker Compose** - [Instalar Docker Compose](https://docs.docker.com/compose/install/)

#### Setup R√°pido com Docker

1. **Clone o reposit√≥rio**

```bash
git clone git@github.com:jaozin98/autogestor-teste.git
cd autogestor-teste
```

2. **Execute o script de setup**

```bash
./docker-setup.sh
```

3. **Acesse a aplica√ß√£o**

-   üåê **Aplica√ß√£o**: http://localhost:8000
-   üóÑÔ∏è **MySQL (dev)**: localhost:3308
-   üß™ **MySQL (test)**: localhost:3307
-   üî¥ **Redis**: localhost:6379

#### Scripts de Automa√ß√£o

O projeto inclui scripts para facilitar o desenvolvimento:

```bash
# Setup inicial completo
./docker-setup.sh

# Resetar banco de dados (migra√ß√µes + seeders)
./docker-reset-db.sh

# Executar testes
./docker-test.sh
```

#### Comandos Docker √öteis

```bash
# Iniciar todos os servi√ßos
docker-compose up -d

# Parar todos os servi√ßos
docker-compose down

# Ver logs da aplica√ß√£o
docker-compose logs -f app

# Acessar container da aplica√ß√£o
docker-compose exec app bash

# Executar comandos Artisan
docker-compose exec app php artisan migrate
docker-compose exec app php artisan db:seed
docker-compose exec app php artisan migrate:fresh --seed  # Recriar banco
docker-compose exec app php artisan cache:clear           # Limpar cache
docker-compose exec app php artisan permissions:clear-cache # Limpar cache de permiss√µes

# Executar testes
./docker-test.sh

# Reconstruir containers
docker-compose build --no-cache
```

#### Configura√ß√£o de Ambiente Docker

O Docker Compose inclui:

-   **Aplica√ß√£o Laravel** (PHP 8.2 + Nginx)
-   **MySQL 8.0** para desenvolvimento
-   **MySQL 8.0** separado para testes
-   **Redis 7** para cache e sess√µes
-   **Nginx** como servidor web

#### Vari√°veis de Ambiente

Copie o arquivo de exemplo e configure conforme necess√°rio:

```bash
cp .env.docker.example .env.docker
```

### Instala√ß√£o Manual

### macOS

#### 1. Instalar Homebrew (se n√£o tiver)

```bash
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

#### 2. Instalar PHP

```bash
brew install php@8.2
brew link php@8.2
```

#### 3. Instalar Composer

```bash
brew install composer
```

#### 4. Instalar Node.js

```bash
brew install node
```

#### 5. Instalar Git

```bash
brew install git
```

### Windows

#### 1. Instalar XAMPP ou Laragon

-   **XAMPP**: Baixe em [https://www.apachefriends.org/](https://www.apachefriends.org/)
-   **Laragon**: Baixe em [https://laragon.org/](https://laragon.org/)

#### 2. Instalar Composer

-   Baixe o instalador em [https://getcomposer.org/download/](https://getcomposer.org/download/)
-   Execute o arquivo baixado e siga as instru√ß√µes

#### 3. Instalar Node.js

-   Baixe em [https://nodejs.org/](https://nodejs.org/)
-   Execute o instalador e siga as instru√ß√µes

#### 4. Instalar Git

-   Baixe em [https://git-scm.com/](https://git-scm.com/)
-   Execute o instalador e siga as instru√ß√µes

### Linux (Ubuntu/Debian)

#### 1. Atualizar o sistema

```bash
sudo apt update && sudo apt upgrade -y
```

#### 2. Instalar PHP e extens√µes

```bash
sudo apt install php8.2 php8.2-cli php8.2-common php8.2-mysql php8.2-zip php8.2-gd php8.2-mbstring php8.2-curl php8.2-xml php8.2-bcmath php8.2-json php8.2-tokenizer php8.2-fileinfo php8.2-pdo php8.2-pdo-mysql php8.2-dom php8.2-ctype php8.2-pcre php8.2-openssl -y
```

#### 3. Instalar Composer

```bash
curl -sS https://getcomposer.org/installer | php
sudo mv composer.phar /usr/local/bin/composer
```

#### 4. Instalar Node.js

```bash
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs
```

#### 5. Instalar Git

```bash
sudo apt install git -y
```

## üîß Configura√ß√£o do Projeto

### 1. Clonar o reposit√≥rio

```bash
git clone git@github.com:jaozin98/autogestor-teste.git
cd autogestor-teste
```

### 2. Instalar depend√™ncias PHP

```bash
composer install
```

### 3. Instalar depend√™ncias Node.js

```bash
npm install
```

### 4. Configurar arquivo de ambiente

```bash
cp .env.example .env
```

### 5. Gerar chave da aplica√ß√£o

```bash
php artisan key:generate
```

### 6. Configurar banco de dados

#### Para MySQL:

Edite o arquivo `.env`:

```env
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=autogestor
DB_USERNAME=root
DB_PASSWORD=sua_senha
```

### 7. Executar migra√ß√µes

```bash
php artisan migrate
```

### 8. Executar seeders

```bash
php artisan db:seed
```

### 9. Compilar assets

```bash
npm run build
```

### 10. Configurar permiss√µes (Linux/macOS)

```bash
chmod -R 775 storage bootstrap/cache
```

## üèÉ‚Äç‚ôÇÔ∏è Executando o Projeto

### üê≥ Desenvolvimento com Docker

#### 1. Iniciar ambiente de desenvolvimento

```bash
docker-compose up -d
```

#### 2. Acessar a aplica√ß√£o

O projeto estar√° dispon√≠vel em: `http://localhost:8000`

#### 3. Compilar assets em modo de desenvolvimento

```bash
docker-compose exec app npm run dev
```

#### 4. Executar comandos Artisan

```bash
# Migra√ß√µes
docker-compose exec app php artisan migrate

# Seeders
docker-compose exec app php artisan db:seed

# Limpar cache
docker-compose exec app php artisan cache:clear

# Ver logs
docker-compose exec app php artisan pail
```

#### 5. Acessar container para desenvolvimento

```bash
docker-compose exec app bash
```

### Desenvolvimento Manual

#### 1. Iniciar servidor de desenvolvimento

```bash
php artisan serve
```

O projeto estar√° dispon√≠vel em: `http://localhost:8000`

#### 2. Compilar assets em modo de desenvolvimento

```bash
npm run dev
```

#### 3. Executar ambos simultaneamente

```bash
composer run dev
```

### Produ√ß√£o

#### 1. Otimizar para produ√ß√£o

```bash
php artisan config:cache
php artisan route:cache
php artisan view:cache
npm run build
```

#### 2. Configurar servidor web

Configure seu servidor web (Apache/Nginx) para apontar para a pasta `public/`

## üë§ Usu√°rios Padr√£o

Ap√≥s executar os seeders, os seguintes usu√°rios estar√£o dispon√≠veis:

### Administrador

-   **Email**: `admin@autogestor.com`
-   **Senha**: `12345678`
-   **Permiss√µes**: Acesso total ao sistema

### Usu√°rio Padr√£o

-   **Email**: Qualquer email que voc√™ criar
-   **Senha**: Definida durante o cadastro
-   **Permiss√µes**: Acesso b√°sico a produtos, categorias e marcas

## üìä Estrutura do Banco de Dados

### Tabelas Principais

-   `users` - Usu√°rios do sistema
-   `products` - Produtos
-   `categories` - Categorias
-   `brands` - Marcas
-   `roles` - Pap√©is de usu√°rio
-   `permissions` - Permiss√µes
-   `model_has_roles` - Relacionamento usu√°rio-papel
-   `model_has_permissions` - Relacionamento usu√°rio-permiss√£o
-   `role_has_permissions` - Relacionamento papel-permiss√£o

## üîê Sistema de Permiss√µes

O AutoGestor utiliza o pacote Spatie Laravel Permission para controle de acesso:

### Roles Padr√£o

-   **admin**: Acesso a gerenciamento de usu√°rios, roles e permissions
-   **user**: Acesso a gerenciamendo de produtos, categorias e marcas

### Permiss√µes Principais

-   `products.*` - Gerenciamento de produtos
-   `categories.*` - Gerenciamento de categorias
-   `brands.*` - Gerenciamento de marcas
-   `users.*` - Gerenciamento de usu√°rios
-   `roles.*` - Gerenciamento de pap√©is
-   `permissions.*` - Gerenciamento de permiss√µes

## üß™ Testes

### üê≥ Testes com Docker (Recomendado)

Para executar testes em um ambiente isolado e consistente:

```bash
# Executar todos os testes
./docker-test.sh

# Ou manualmente:
docker-compose -f docker-compose.testing.yml up -d
docker-compose -f docker-compose.testing.yml exec app_testing php artisan migrate --env=testing
docker-compose -f docker-compose.testing.yml exec app_testing php artisan test
docker-compose -f docker-compose.testing.yml down
```

### Testes Manuais

#### Executar todos os testes

```bash
php artisan test
```

#### Executar testes espec√≠ficos

```bash
php artisan test --filter=ProductServiceTest
```

#### Executar testes com cobertura

```bash
php artisan test --coverage
```

## üìù Comandos Artisan √öteis

### Cache e Otimiza√ß√£o

```bash
php artisan config:clear    # Limpar cache de configura√ß√£o
php artisan route:clear     # Limpar cache de rotas
php artisan view:clear      # Limpar cache de views
php artisan cache:clear     # Limpar cache geral
php artisan optimize        # Otimizar aplica√ß√£o
```

### Banco de Dados

```bash
php artisan migrate:fresh   # Recriar banco e executar migra√ß√µes
php artisan migrate:refresh # Reverter e executar migra√ß√µes
php artisan db:seed         # Executar seeders
php artisan db:wipe         # Limpar banco de dados
```

### Permiss√µes

```bash
php artisan permission:cache-reset  # Limpar cache de permiss√µes
php artisan assign:user-roles       # Atribuir roles aos usu√°rios
```

### Logs

```bash
php artisan pail            # Visualizar logs em tempo real
```

## üêõ Solu√ß√£o de Problemas

### üê≥ Problemas com Docker

#### Container n√£o inicia

```bash
# Verificar logs
docker-compose logs app

# Reconstruir containers
docker-compose build --no-cache
docker-compose up -d
```

#### Erro de conex√£o com banco de dados

```bash
# Verificar se MySQL est√° rodando
docker-compose ps

# Reiniciar apenas o MySQL
docker-compose restart mysql
```

#### Erro de permiss√µes no container

```bash
# Corrigir permiss√µes
docker-compose exec app chown -R www-data:www-data /var/www/html/storage
docker-compose exec app chown -R www-data:www-data /var/www/html/bootstrap/cache
```

#### Limpar volumes Docker

```bash
# Parar e remover volumes
docker-compose down -v

# Remover imagens n√£o utilizadas
docker system prune -a
```

### Problemas Manuais

#### Erro de permiss√µes (Linux/macOS)

```bash
sudo chown -R $USER:$USER storage bootstrap/cache
chmod -R 775 storage bootstrap/cache
```

#### Erro de extens√µes PHP

Verifique se todas as extens√µes necess√°rias est√£o instaladas:

```bash
php -m | grep -E "(bcmath|ctype|curl|dom|fileinfo|json|mbstring|openssl|pcre|pdo|tokenizer|xml)"
```

#### Erro de depend√™ncias Node.js

```bash
rm -rf node_modules package-lock.json
npm install
```

#### Erro de depend√™ncias Composer

```bash
rm -rf vendor composer.lock
composer install
```

#### Erro de banco de dados

```bash
php artisan migrate:fresh --seed
```

## üìÅ Estrutura do Projeto

```
AutoGestor/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ Console/Commands/          # Comandos personalizados
‚îÇ   ‚îú‚îÄ‚îÄ Contracts/                 # Interfaces e contratos
‚îÇ   ‚îú‚îÄ‚îÄ Http/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Controllers/           # Controladores
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Middleware/            # Middlewares
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Requests/              # Valida√ß√µes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Resources/             # API Resources
‚îÇ   ‚îú‚îÄ‚îÄ Models/                    # Modelos Eloquent
‚îÇ   ‚îú‚îÄ‚îÄ Observers/                 # Observers dos modelos
‚îÇ   ‚îú‚îÄ‚îÄ Providers/                 # Service Providers
‚îÇ   ‚îú‚îÄ‚îÄ Repositories/              # Reposit√≥rios
‚îÇ   ‚îî‚îÄ‚îÄ Services/                  # Servi√ßos de neg√≥cio
‚îú‚îÄ‚îÄ config/                        # Arquivos de configura√ß√£o
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ factories/                 # Factories para testes
‚îÇ   ‚îú‚îÄ‚îÄ migrations/                # Migra√ß√µes do banco
‚îÇ   ‚îî‚îÄ‚îÄ seeders/                   # Seeders
‚îú‚îÄ‚îÄ docker/                        # Configura√ß√µes Docker
‚îÇ   ‚îú‚îÄ‚îÄ nginx/                     # Configura√ß√£o Nginx
‚îÇ   ‚îú‚îÄ‚îÄ mysql/                     # Configura√ß√£o MySQL
‚îÇ   ‚îú‚îÄ‚îÄ php/                       # Configura√ß√£o PHP
‚îÇ   ‚îî‚îÄ‚îÄ supervisor/                # Configura√ß√£o Supervisor
‚îú‚îÄ‚îÄ public/                        # Arquivos p√∫blicos
‚îú‚îÄ‚îÄ resources/
‚îÇ   ‚îú‚îÄ‚îÄ css/                       # Estilos CSS
‚îÇ   ‚îú‚îÄ‚îÄ js/                        # JavaScript
‚îÇ   ‚îú‚îÄ‚îÄ lang/                      # Tradu√ß√µes
‚îÇ   ‚îú‚îÄ‚îÄ sass/                      # Arquivos Sass
‚îÇ   ‚îî‚îÄ‚îÄ views/                     # Views Blade
‚îú‚îÄ‚îÄ routes/                        # Defini√ß√£o de rotas
‚îú‚îÄ‚îÄ storage/                       # Arquivos de armazenamento
‚îú‚îÄ‚îÄ tests/                         # Testes automatizados
‚îú‚îÄ‚îÄ Dockerfile                     # Imagem Docker da aplica√ß√£o
‚îú‚îÄ‚îÄ docker-compose.yml             # Configura√ß√£o Docker Compose
‚îú‚îÄ‚îÄ docker-compose.testing.yml     # Configura√ß√£o Docker para testes
‚îú‚îÄ‚îÄ docker-setup.sh                # Script de setup Docker
‚îú‚îÄ‚îÄ docker-test.sh                 # Script de execu√ß√£o de testes
‚îú‚îÄ‚îÄ env.docker.example             # Exemplo de vari√°veis de ambiente
‚îî‚îÄ‚îÄ .dockerignore                  # Arquivos ignorados no build Docker
```

## ü§ù Contribuindo

1. Fa√ßa um fork do projeto
2. Crie uma branch para sua feature (`git checkout -b feature/AmazingFeature`)
3. Commit suas mudan√ßas (`git commit -m 'Add some AmazingFeature'`)
4. Push para a branch (`git push origin feature/AmazingFeature`)
5. Abra um Pull Request

## üìÑ Licen√ßa

Este projeto est√° sob a licen√ßa MIT. Veja o arquivo [LICENSE](LICENSE) para mais detalhes.

## üìû Suporte

Para suporte e d√∫vidas:

-   Abra uma issue no reposit√≥rio
-   Entre em contato com a equipe de desenvolvimento

## üîÑ Atualiza√ß√µes

Para manter o projeto atualizado:

```bash
# Atualizar depend√™ncias PHP
composer update

# Atualizar depend√™ncias Node.js
npm update

# Executar migra√ß√µes pendentes
php artisan migrate

# Limpar caches
php artisan optimize
```

---

**AutoGestor** - Sistema de Gerenciamento Empresarial Completo
